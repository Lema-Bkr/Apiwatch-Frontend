<!-- Copyright 2018-present Mellisphera
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License. -->

<div [class]="'content-page ' + checkLoadindingIsComplete()" (click)="closeContextMenu()">
  <nav class="navbar navbar-default" role="admin-navigation">
    <div class="navbar-header">
    </div>
    <ul class="nav navbar-nav buttonLeft">
      <li>
        <button type="button" [id]="btnNav[0].path" (click)="navToPage(btnNav[0].path, btnNav[0].path)"
          class="button button0" data-toggle="tooltip" data-placement="top"
          title="{{ 'MELLICHARTS.NAV.HIVE_TOOLTIP' | translate }}">{{ 'MELLICHARTS.NAV.HIVE' | translate }}</button>
      </li>
      <li>
        <button type="button" [id]="btnNav[1].path" (click)="navToPage(btnNav[1].path, btnNav[1].path)"
          class="button button0"data-toggle="tooltip" data-placement="top"
          title="{{ 'MELLICHARTS.NAV.BROOD_TOOLTIP' | translate }}">{{ 'MELLICHARTS.NAV.BROOD' | translate }}</button>
      </li>
      <li>
        <button type="button" [id]="btnNav[3].path" (click)="navToPage(btnNav[3].path, btnNav[3].path)"
          class="button button0" data-toggle="tooltip" data-placement="top"
          title="{{ 'MELLICHARTS.NAV.WEIGHT_TOOLTIP' | translate }}">{{ 'MELLICHARTS.NAV.WEIGHT' | translate }}</button>
      </li>
      <li>
        <button type="button" [id]="btnNav[2].path" (click)="navToPage(btnNav[2].path, btnNav[2].path)"
          class="button button0"data-toggle="tooltip" data-placement="top"
          title="{{ 'MELLICHARTS.NAV.DONNEE_TOOLTIP' | translate }}">{{ 'MELLICHARTS.NAV.DONNEE' | translate }}</button>
      </li>
    </ul>
    <ul class="nav nav-date navbar-nav navbar-right">
      <li><button type="button" (click)="previousDate()" class="btn date-arrow btn-transparent"><i
            class="fa fa-arrow-circle-left" id="previous-date"></i></button></li>
      <li id="dropdown">
        <div class="dropdown" id="date-dropdown">
          <button id="btn-date" class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><i
              class="fa fa-calendar"></i>{{ melliChartDate.start | myDate: 'DAILY' }} <span id="arrow">&#8680;</span>
            {{ melliChartDate.end | myDate: 'DAILY' }}
            <span class="caret"></span></button>
          <div class="dropdown-menu dropdown-menu-right">
            <div id="input-date">
              <div class="form-group">
                <label>{{ 'MELLICHARTS.DATE.START' | translate }} </label>
                <input id="calendar-begin" class="form-control" [owlDateTimeTrigger]="dt1" [(ngModel)]="melliChartDate.start"
                  [owlDateTime]="dt1">
                <owl-date-time (afterPickerClosed)="onCloseDatePicker()" [pickerType]="'calendar'" firstDayOfWeek="1"
                  #dt1></owl-date-time>

              </div>
              <div class="form-group">
                <label>{{ 'MELLICHARTS.DATE.END' | translate }} </label>
                <input id="calendar-end" class="form-control" [owlDateTimeTrigger]="dt2" [(ngModel)]="melliChartDate.end"
                  [owlDateTime]="dt2">
                <owl-date-time (afterPickerClosed)="onCloseDatePicker()" [pickerType]="'calendar'" firstDayOfWeek="1"
                  #dt2></owl-date-time>
              </div>
              <button type="button" (click)="setDateFromInput()"
                class="btn btn-large button0 btn-block btn-primary">{{ 'MELLICHARTS.DATE.BTN_APPLY' | translate}}</button>
            </div>
            <div id="dt-scale">
              <div>
                <ul>
                  <li class="time" *ngFor="let dt of getRangeByType('DAY')" (click)="setRangeSelect(dt)">
                    {{ dt.scale }} {{ getRangeBYLang(dt) | lowercase }}</li>
                </ul>
                <ul>
                  <li class="time" *ngFor="let dt of getRangeByType('WEEK')" (click)="setRangeSelect(dt)">
                    {{ dt.scale }} {{ getRangeBYLang(dt) | lowercase }}</li>
                </ul>
                <ul>
                  <li class="time" *ngFor="let dt of getRangeByType('MONTH')" (click)="setRangeSelect(dt)">
                    {{ dt.scale }} {{ getRangeBYLang(dt) | lowercase }}</li>
                </ul>
                <ul>
                  <li class="time" *ngFor="let dt of getRangeByType('YEAR')" (click)="setRangeSelect(dt)">
                    {{ dt.scale }} {{ getRangeBYLang(dt) | lowercase }}</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </li>
      <li><button type="button" (click)="nextDate()" class="btn date-arrow btn-transparent"><i id="next-date"
            class="fa fa-arrow-circle-right"></i></button>
      </li>
      <li class="filters-ul">
        <button class="btn filters-btn dropdown dropdown-toogle" type="button" id="filtersMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" (click)="openFiltersMenu($event)">
          <img src="../../../assets/icons/ui/user_prefs.svg">
        </button>
        <div id="filtersMenu" class="dropdown-menu" aria-labelledby="filtersMenuButton" (click)="filterMenu($event)">
          <div class="filters-alerts">
            <input type="button" class="filters-alerts-btn-active" width="35" height="35" (click)="filterButton($event)">
            <p class="filters-alerts-title">{{ 'MELLICHARTS.FILTERS.ALERT.ALL' | translate}}</p>
          </div>
          <div class="filters-insp">
            <input type="button" class="filters-insp-btn-active" width="35" height="35" (click)="filterButton($event)">
            <p class="filters-insp-title">{{ 'MELLICHARTS.FILTERS.INSPECTION.ALL' | translate}}</p>
          </div>
          <div class="filters-events">
            <input type="button" class="filters-events-btn-active" width="35" height="35" (click)="filterButton($event)">
            <p class="filters-events-title">{{ 'MELLICHARTS.FILTERS.EVENT.ALL' | translate}}</p>
            <!--<img src="../../../assets/icons/inspect/inspectsV2/4_tool_jhook.svg" width="25" height="25" style="margin-left:5px;">-->
          </div>
          <div class="filters-events-display">
          </div>
        </div>
    </li>
    </ul>
  </nav>
  <div class="row nopadding">
    <div class="apiaryGroup">
      <div id="main-menu" class="list-group">
        <ng-container *ngFor="let rucher of rucherService.allApiaryAccount; let i = index;">
          <a [href]="'#' + i" [class]="'list-group-item apiary ' + checkApiaryIfAcive(rucher._id)"
            data-toggle="collapse" data-parent="#main-menu"><span></span>{{ rucher.name }}<span [id]="rucher._id"
              [class]="'caret ' + ifActiveApiary(rucher._id)"></span></a>
          <div
            [class]="'collapse list-group-level1 ' +ifCurrentApiary(rucher._id) " [id]="i">
            <a [class]="'list-group-item sub-items ' + checkLoadindingIsComplete()"
              *ngFor="let ruche of rucheService.getHivesByApiaryId(rucher._id); let i = index"
              (click)="selectHive(ruche, $event)" (contextmenu)="showContextMenu(ruche, $event)" data-parent="#sub-menu"><i class="circle"
                [style.background-color]="getColor(ruche)"></i><span class="puce-hive"></span>{{ ruche.name }}</a>
          </div>
<!--           <div *ngIf="tokenService.checkAuthorities('ROLE_ADMIN')"
            [class]="'collapse list-group-level1 ' +ifCurrentApiary(rucher._id) " [id]="i">
            <a [class]="'list-group-item sub-items ' + checkLoadindingIsComplete()"
              *ngFor="let ruche of adminService.getHivesByApiaryId(rucher._id); let i = index"
              (click)="selectHive(ruche, $event)" data-parent="#sub-menu"><i class="circle"
                [style.background-color]="getColor(ruche)"></i><span class="puce-hive"></span>{{ ruche.name }}</a>
          </div> -->
        </ng-container>
      </div>
    </div>

    <div id="content">
      <router-outlet (activate)="onActivate($event)"></router-outlet>
    </div>

    <div class="right-click-menu">
      <div class="right-click-title">
        <span class="hive-title">
          <i class="circle"></i>
          <p class="hive-name"></p>
        </span>
      </div>
      <div>
        <ul class="context-menu-group">
          <li class="context-menu-choice add-event" (click)="showAddEvent()" ><i class="fa fa-plus"></i><p>{{'MELLICHARTS.EVENT.ADD.TITLE' | translate}}</p></li>
          <li class="context-menu-choice delete-event" (click)="showDeleteEvent()" ><i class="fa fa-minus"></i><p>{{'MELLICHARTS.EVENT.DELETE.TITLE' | translate}}</p></li>
        </ul>
      </div>
    </div>

  </div>
  <div class="black-filter"></div>
  <div class="add-event-screen">
    <h3>{{hiveEvent?.name}} | {{'MELLICHARTS.EVENT.ADD.TITLE' | translate}}</h3>
    <div class="add-event-date">
      <div>
        <input class="add-event-time-input" placeholder="{{'MELLICHARTS.EVENT.ADD.DATE_PLACEHOLDER' | translate}}" [(ngModel)]="newEventDate" [owlDateTimeTrigger]="dtEvent" [owlDateTime]="dtEvent" (ngModelChange)="setNewEventDate()">
        <owl-date-time #dtEvent></owl-date-time>
      </div>
      <div class="add-event-time-error">
        {{'MELLICHARTS.EVENT.ADD.DATE_ERROR' | translate}}
      </div>
    </div>
    <div class="add-event-choice">
      <div class="add-event-choice-obs">
      </div>
    </div>
    <div class="add-event-notes">
        <textarea placeholder="{{'MELLICHARTS.EVENT.ADD.NOTES_PLACEHOLDER' | translate}}" (change)="saveNotes($event)" spellcheck="false"></textarea>
    </div>
    <div class="add-event-todo">
      <textarea placeholder="{{'MELLICHARTS.EVENT.ADD.TODO_PLACEHOLDER' | translate}}" (change)="saveTodo($event)" spellcheck="false"></textarea>
    </div>
    <div class="add-event-buttons">
      <button class="btn btn-danger" style="margin-right:10px;height:34px;" (click)="discardAddEvent()">{{'MELLICHARTS.EVENT.BUTTONS.CANCEL' | translate}}</button>
      <button class="btn btn-success" style="margin-left:10px;height:34px;" (click)="insertAddEvent()">{{'MELLICHARTS.EVENT.BUTTONS.ADD' | translate}}</button>
    </div>
  </div>
  <div class="delete-event-screen">
    <h3>{{hiveEvent?.name}} | {{'MELLICHARTS.EVENT.DELETE.TITLE' | translate}}</h3>
    <div class="delete-list">
      <div class="delete-event-list"></div>
      <div class="delete-alert-list"></div>
    </div>
    <div class="delete-event-buttons">
      <button class="btn btn-danger" style="margin-right:10px;" (click)="discardDeleteEvent()">{{'MELLICHARTS.EVENT.BUTTONS.CANCEL' | translate}}</button>
      <button class="btn btn-success" style="margin-left:10px;" (click)="deleteDeleteEvent()">{{'MELLICHARTS.EVENT.BUTTONS.DELETE' | translate}}</button>
    </div>
  </div>
</div>
